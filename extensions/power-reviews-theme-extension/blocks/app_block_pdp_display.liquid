<script src="https://ui.powerreviews.com/stable/4.1/ui.js" async></script>
<h2 class="h4 section__heading text-start">Ratings & Reviews</h2>
<div id="pr-reviewsnapshot"></div>
<div id="pr-reviewlist"></div>

<script>
window.pwr = window.pwr || function () {
  (pwr.q = pwr.q || []).push(arguments);
};
pwr("render", {
  api_key: "{{ block.settings.api_key }}",
  locale: "{{ block.settings.locale }}",
  merchant_group_id: "{{ block.settings.merchant_group_id }}",
  merchant_id: "{{ block.settings.merchant_id }}",
  page_id: "{{ product.handle }}",
  review_wrapper_url: "{{ shop.url }}/pages/write-a-review/?pr_page_id={{ product.handle }}",
  product: {
    name: "{{ product.title | replace: "+", " " }}",
    url: "{{ shop.url }}{{ product.url }}",
    image_url: "https:{{ product | image_url: width: 450 }}",
    description: "{{ product.description | strip_html | strip_newlines | replace: "%0A", "%20" | replace: '"', '%27' | escape }}",
    category_name: {% if product.type != '' %}"{{ product.type }}"{% else %} "Default" {% endif %},
    manufacturer_id: "{{ product.vendor }}",
    upc: "{{ product.barcode }}",
    brand_name: "{{ product.vendor }}",
    price: "{{ product.price | money_without_currency }}",
    in_stock: "{{ product.available }}"
  },
  REVIEW_DISPLAY_SNAPSHOT_TYPE:'SIMPLE',
  components: {
    ReviewSnippet: "pr-reviewsnippet",
    ReviewSnapshot: "pr-reviewsnapshot",
    ReviewList: "pr-reviewlist"
  }
},
);
</script>
<!-- end_review_render_code_js_section -->

{% schema %}
{
  "name": "PWR-PDP-Display",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "api_key",
      "label": "API Key",
      "default": "Enter text here"
    },
    {
      "type": "text",
      "id": "locale",
      "label": "Locale",
      "default": "en_US"
    },
    {
      "type": "text",
      "id": "merchant_group_id",
      "label": "Merchant Group ID",
      "default": "Enter text here"
    },
    {
      "type": "text",
      "id": "merchant_id",
      "label": "Merchant ID",
      "default": "Enter text here"
    }
  ]
}
{% endschema %}
